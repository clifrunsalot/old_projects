<!doctype html>
<html>
<head>
  <title>Guess the color game</title>
</head>
<body onload="do_game();">

<script>

  // Array of colors
  var colors = ["darkkhaki",
                "forestgreen",
                "lightblue",
                "black",
                "mediumaquamarine",
                "orchid",
                "seashell",
                "yellowgreen"];

  // Sort alphabetically just in case.
  colors.sort();

  console.log(colors);

  // Tracking variables
  var attempts = 0;
  var finished = false;
  var random_number = -1;
  var correct_color = "";
  var choice = "";

  // Main function of game.
  function do_game(){

    // Generate a number between 0 and the last index of the color array
    random_number = Math.floor(Math.random() * colors.length);
    correct_color = colors[random_number];
    alert("The correct color is " + correct_color);
    console.log("Correct color: " + correct_color);
    console.log("Color index: " + random_number);

    // loop for getting user guesses
    while(!finished){

      choice = prompt("I am thinking of one of these colors: \n\n" +
                  colors.join("\n") + "\n\n" +
                "What color am I thinking of?");

      console.log("User guess: " + choice);

      if (choice != null) {
        finished = check_guess(choice);
      } else {
        // means user cancelled the game.
        alert("Thanks for playing.");
        finished = true;
      }
    }
  }

  // Prompts user for a guess and validates choice
  // Returns true with the guess is correct
  function check_guess(clr){

    var found = false;
    var user_choice = clr.trim();
    attempts++;

    // If the color is not empty, check value.
    if (user_choice != ""){

      // change answer and user choice to lowercase for easier testing.
      var lc_choice = user_choice.toLowerCase();
      var lc_answer = correct_color.toLowerCase();

      if (colors.indexOf(lc_choice) == -1){
        alert("Sorry, I do not recognize your color.\n\n" +
              "Please try again.");
      } else if (lc_choice > lc_answer){
        alert("Sorry, your guess is not correct!\n\n" +
              "HINT: Your color is alphabetically higher than mine\n\n");
      } else if (lc_choice < lc_answer){
        alert("Sorry, your guess is not correct!\n\n" +
              "HINT: Your color is alphabetically lower than mine\n\n");
      } else {
        var body = document.getElementsByTagName("body")[0];
        body.style.background = user_choice;
        alert("Congratulations! You have guessed the color!\n\n" +
              "It took you " + attempts + " guess(es) to finish the game!\n\n" +
              "You can see the color in the background.");
        found = true;
      }

    } else {
      alert("Sorry, I don't recognize your color.\n\n" +
            "Please try again.");
    }

    return found;
  }

</script>
</body>
</html>
